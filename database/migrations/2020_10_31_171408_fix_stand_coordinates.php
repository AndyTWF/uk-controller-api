<?php

use App\Services\SectorfileService;
use Carbon\Carbon;
use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Schema;

class FixStandCoordinates extends Migration
{
    const LATITUDES_TO_FIX = [
        'N051.34.9.445' => 'N051.34.09.445',
        'N051.34.8.064' => 'N051.34.08.064',
        'N051.34.6.908' => 'N051.34.06.908',
        'N051.34.6.032' => 'N051.34.06.032',
        'N55.56.45.20' => 'N055.56.45.200',
        'N55.56.45.96' => 'N055.56.45.960',
        'N55.56.45.83' => 'N055.56.45.830',
        'N55.56.47.04' => 'N055.56.47.040',
        'N55.56.46.71' => 'N055.56.46.710',
        'N55.56.46.43' => 'N055.56.46.430',
        'N55.56.47.64' => 'N055.56.47.640',
        'N55.56.47.46' => 'N055.56.47.460',
        'N55.56.48.21' => 'N055.56.48.210',
        'N55.56.48.96' => 'N055.56.48.960',
        'N55.56.49.72' => 'N055.56.49.720',
        'N55.56.50.47' => 'N055.56.50.470',
    ];

    const LONGITUDES_TO_FIX = [
        'W001.44.9.080' => 'W001.44.09.080',
        'W001.44.9.871' => 'W001.44.09.871',
        'W00.22.23.870' => 'W000.22.23.870',
        'W000.28.1.774' => 'W000.28.01.774',
        'E000.42.9.934' => 'E000.42.09.934',
        'E000.42.9.833' => 'E000.42.09.833',
        'E000.42.9.529' => 'E000.42.09.529',
        'E000.42.9.333' => 'E000.42.09.333',
        'E000.42.8.486' => 'E000.42.08.486',
        'E000.42.6.326' => 'E000.42.06.326',
        'W003.21.01.44' => 'W003.21.01.440',
        'W003.20.59.22' => 'W003.20.59.220',
        'W003.20.59.69' => 'W003.20.59.690',
        'W003.20.56.14' => 'W003.20.56.140',
        'W003.20.56.99' => 'W003.20.56.990',
        'W003.20.57.92' => 'W003.20.57.920',
        'W003.20.54.36' => 'W003.20.54.360',
        'W003.20.54.78' => 'W003.20.54.780',
        'W003.20.52.56' => 'W003.20.52.560',
        'W003.20.50.34' => 'W003.20.50.340',
        'W003.20.48.12' => 'W003.20.48.120',
        'W003.20.45.90' => 'W003.20.45.900',
        'E000.42.4.464' => 'E000.42.04.464',
        'W003.25.00.45' => 'W003.25.00.450',
        'W003.25.00.28' => 'W003.25.00.280',
        'W003.25.01.92' => 'W003.25.01.920',
        'W003.25.03.42' => 'W003.25.03.420',
        'W003.25.05.05' => 'W003.25.05.050',
        'W003.25.06.76' => 'W003.25.06.760',
        'W003.25.07.16' => 'W003.25.07.160',
        'W003.25.08.95' => 'W003.25.08.950',
        'W003.25.11.62' => 'W003.25.11.620',
        'W003.25.13.49' => 'W003.25.13.490',
        'W003.25.12.46' => 'W003.25.12.460',
        'W003.25.11.26' => 'W003.25.11.260',
    ];

    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        foreach (self::LONGITUDES_TO_FIX as $old => $new) {
            DB::table('stands')
                ->where('longitude', $old)
                ->update(['longitude' => $new, 'updated_at' => Carbon::now()]);
        }

        foreach (self::LATITUDES_TO_FIX as $old => $new) {
            DB::table('stands')
                ->where('latitude', $old)
                ->update(['latitude' => $new, 'updated_at' => Carbon::now()]);
        }
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        // Do nothing here, we shouldn't go back
    }
}
