<?php

use App\Services\SectorfileService;
use Carbon\Carbon;
use Illuminate\Database\Migrations\Migration;
use Illuminate\Support\Facades\DB;

class AddMissingAirfieldsForElevations extends Migration
{
    const AIRFIELDS = [
        [
            'EGSL',
            '515342N',
            '0002657E',
        ],
        [
            'EGNL',
            '540743N',
            '0031603W',
        ],
        [
            'EGBF',
            '521357N',
            '0002644W',
        ],
        [
            'EGLK',
            '511926N',
            '0005051W',
        ],
        [
            'EGEC',
            '552615N',
            '0054117W',
        ],
        [
            'EGLJ',
            '514028N',
            '0010507W',
        ],
        [
            'EGEL',
            '563607N',
            '0063704W',
        ],
        [
            'EGEY',
            '560327N',
            '0061435W',
        ],
        [
            'EGHA',
            '505802N',
            '0020913W',
        ],
        [
            'EGPG',
            '555829N',
            '0035832W',
        ],
        [
            'EGLD',
            '513518N',
            '0003047W',
        ],
        [
            'EGBD',
            '525135N',
            '0013703W',
        ],
        [
            'EGTU',
            '505136N',
            '0031405W',
        ],
        [
            'EGSU',
            '520526N',
            '0000753E',
        ],
        [
            'EGSR',
            '515452N',
            '0004057E',
        ],
        [
            'EGED',
            '591125N',
            '0024621W',
        ],
        [
            'EGTR',
            '513921N',
            '0001933W',
        ],
        [
            'EGAB',
            '542355N',
            '0073907W',
        ],
        [
            'EGEF',
            '593205N',
            '0013743W',
        ],
        [
            'EGTF',
            '512053N',
            '0003331W',
        ],
        [
            'EGCL',
            '524422N',
            '0000148W',
        ],
        [
            'EGPI',
            '554100N',
            '0061535W',
        ],
        [
            'EGKH',
            '510923N',
            '0003840E',
        ],
        [
            'EGHF',
            '504856N',
            '0011224W',
        ],
        [
            'EGCM',
            '535004N',
            '0011144W',
        ],
        [
            'EGBG',
            '523628N',
            '0010155W',
        ],
        [
            'EGET',
            '601131N',
            '0011437W',
        ],
        [
            'EGCB',
            '532818N',
            '0022323W',
        ],
        [
            'EGNF',
            '531901N',
            '0011146W',
        ],
        [
            'EGAD',
            '543452N',
            '0054131W',
        ],
        [
            'EGEN',
            '592203N',
            '0022604W',
        ],
        [
            'EGBK',
            '521822N',
            '0004732W',
        ],
        [
            'EGBN',
            '525512N',
            '0010445W',
        ],
        [
            'EGSV',
            '522951N',
            '0010307E',
        ],
        [
            'EGTH',
            '520512N',
            '0001907W',
        ],
        [
            'EGEP',
            '592104N',
            '0025401W',
        ],
        [
            'EGFP',
            '514250N',
            '0041844W',
        ],
        [
            'EGPT',
            '562628N',
            '0032226W',
        ],
        [
            'EGSF',
            '522805N',
            '0001503W',
        ],
        [
            'EGKR',
            '511249N',
            '0000819W',
        ],
        [
            'EGES',
            '591501N',
            '0023430W',
        ],
        [
            'EGCF',
            '533335N',
            '0005130W',
        ],
        [
            'EGCJ',
            '534703N',
            '0011304W',
        ],
        [
            'EGBS',
            '521430N',
            '0025252W',
        ],
        [
            'EGCV',
            '525005N',
            '0024613W',
        ],
        [
            'EGSG',
            '513909N',
            '0000922E',
        ],
        [
            'EGER',
            '590919N',
            '0023829W',
        ],
        [
            'EGBM',
            '524851N',
            '0014553W',
        ],
        [
            'EGHO',
            '511238N',
            '0013600W',
        ],
        [
            'EGNO',
            '534442N',
            '0025300W',
        ],
        [
            'EGBW',
            '521132N',
            '0013652W',
        ],
        [
            'EGFA',
            '520653N',
            '0043334W',
        ],
        [
            'EGEW',
            '592101N',
            '0025700W',
        ],
        [
            'EGLM',
            '513002N',
            '0004629W',
        ],
        [
            'EGNW',
            '531901N',
            '0002056W',
        ],
        [
            'EGTB',
            '513642N',
            '0004830W',
        ],
        [
            'EGHG',
            '505624N',
            '0023932W',
        ],
    ];

    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        DB::table('airfield')
            ->insert(
                array_map(function (array $airfield) {
                    $coordinate = SectorfileService::coordinateFromNats($airfield[1], $airfield[2]);

                    return [
                        'code' => $airfield[0],
                        'latitude' => $coordinate->getLat(),
                        'longitude' => $coordinate->getLng(),
                        'transition_altitude' => 3000,
                        'standard_high' => true,
                        'wake_category_scheme_id' => 1,
                        'created_at' => Carbon::now(),
                    ];
                }, self::AIRFIELDS)
            );
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        //
    }
}
